! Input file for lesgo
! 
! All lines beginning with '!' are comments All entries 
! are not case sensitive. Data blocks must begin with 
! '{' and end with '}'; the block name must be on the 
! same line as the entry bracket '{'.
!
! Be sure to preserve the order of the data blocks as some depend on
! others during the read-in process
!

! Domain parameters
DOMAIN {

  Nx = 32
  Ny = 32
  ! Total grid size (stored as nz_tot)
  Nz = 32

  ! Dimensional length scale [m]:
  z_i = 1.0

  ! Non-dimensional domain length
  Lx = 1.0
  Ly = 1.0
  Lz = 1.0
 
}

! Model parameters
MODEL {

  ! Model type: 1->Smagorinsky; 2->Dynamic; 3->Scale dependent
  !             4->Lagrangian scale-sim   5-> Lagragian scale-dep
  sgs_model = 5
  ! Wall damping exponent for Mason model (default 2)
  wall_damp_exp = 2

  ! Timesteps between dynamic Cs updates
  cs_count = 5

  ! When to start dynamic Cs calculations
  dyn_init = 100

  ! Co used in the Mason model for Smagorisky coefficient
  Co = 0.16

  ! Test filter type: 1->cut off 2->Gaussian 3->Top-hat
  ifilter = 1

  ! Dimensional velocity scale (friction velocity) [m] 
  ! u_star is used if coriolis_forcing=.FALSE. and ug is used if
  ! coriolis_forcing=.TRUE.
  u_star = 0.45

  ! von Karman constant  
  vonk = 0.4
  
  ! Coriolis forcing
  ! coriol -> non-dimensional coriolis parameter
  ! ug -> horizontal geostrophic velocity
  ! vg -> transverse geostrophic velocity
  coriolis_forcing = .false.
  coriol = 0.0001
  ug = 1.0
  vg = 0.0

  ! Viscosity models
  sgs = .true. 
  molec = .false. 
  dns_bc = .false.

  ! Dimensional molecular viscosity [m^2/s]
  nu_molec = 1.14e-5
  
}

TIME {

  ! Number of time steps to run simulation
  nsteps = 100000

  ! Set CFL for dynamic time stepping
  ! only used if CFL_DT=yes in Makefile.in
  cfl = 0.05

  ! Set static time step
  ! only used if CFL_DT=no in Makefile.in
  dt = 2.0e-4

  ! Use cumulative time across multiple simulations
  cumulative_time = .true. 

}

! Output parameters
FLOW_COND {

  ! initu = true to read from a file; false to create with random noise
  initu = .false.

  ! initlag = true to initialize cs, FLM & FMM; false to read from vel.out
  inilag = .true.

  ! Upper boundary condition: ubc=0 stress free lid, ubc=1 sponge
  ubc = 0

  ! Lower boundary condition:  'wall', 'stress free'
  lbc_mom = 'wall'

  ! Lower boundary condition, roughness length (non-dimensional)
  zo = 0.0001

  ! Use forced inflow
  inflow = .false.
  ! If inflow is true the following should be set:
  ! position of right end of fringe region, as a fraction of L_x
  fringe_region_end = 1.0
  ! length of fringe region as a fraction of L_x
  fringe_region_len = 0.125
  ! Use uniform inflow instead of concurrent precursor inflow. If false
  ! concurrent precursor inflow will be used and USE_CPS=yes must be set
  ! in Makefile.in. Otherwise if USE_CPS=no then uniform_inflow must be
  ! set to true.
  uniform_inflow = .false.
  ! Specify uniform inflow velocity
  inflow_velocity = 1.0
  ! Force velocity at top and bottom to the inflow velocity
  force_top_bot = .false.

  ! Use mean pressure forcing
  use_mean_p_force = .true.
  ! Specify mean pressure forcing (Typically 1/Lz) 
  ! non-dimensional
  mean_p_force = 1.0 / 1.0 

}

! Solver parameters
OUTPUT {
  
  ! Specify how often to display simulation update
  wbase = 100

  ! Specify of often to write KE to check_ke.out
  nenergy = 100

  ! Specify how often to display Lagrangian CFL condition of dynamic SGS
  ! models
  lag_cfl_count = 1000

  ! Turn on time averaging 
  ! records time-averaged data to files ./output/*_avg.dat
  tavg_calc = .true.
  ! Set when to start time averaging (base on local simulation time step
  ! and not global)
  tavg_nstart = 50000
  ! Set when to stop time averaging
  tavg_nend = 100000

  ! Turn on instantaneous recording at specified points
  point_calc = .true.
  ! Set when to start recording
  point_nstart = 1
  ! Set when to stop recording
  point_nend = 100000
  ! Set number of iterations to skip between recordings
  point_nskip = 10
  ! Specify number of points to record
  point_nloc = 3
  ! Specify location of points 
  point_loc = 0.1, 0.1, 0.1 // 0.5, 0.5, 0.5 // 0.8, 0.8, 0.1

  ! Turn on instantaneous recording in entire domain
  domain_calc = .true.
  ! Set when to start recording
  domain_nstart = 50000
  ! Set when to stop recording
  domain_nend = 100000
  ! Set number of iterations to skip between recordings
  domain_nskip = 10  

  ! Turn on instantaneous recording at specified x-planes
  xplane_calc = .false.
  ! Set when to start recording
  xplane_nstart = 1
  ! Set when to stop recording
  xplane_nend = 100000
  ! Set number of iterations to skip between recordings
  xplane_nskip = 10
  ! Specify number of planes to record
  xplane_nloc = 3
  ! Specify location of planes
  xplane_loc = 0.1, 0.2, 0.3

  ! Turn on instantaneous recording at specified y-planes
  yplane_calc = .false.
  ! Set when to start recording
  yplane_nstart = 1
  ! Set when to stop recording
  yplane_nend = 100000
  ! Set number of iterations to skip between recordings
  yplane_nskip = 10
  ! Specify number of planes to record
  yplane_nloc = 3
  ! Specify location of planes
  yplane_loc = 0.1, 0.2, 0.3

  ! Turn on instantaneous recording at specified z-planes
  zplane_calc = .false.
  ! Set when to start recording
  zplane_nstart = 1
  ! Set when to stop recording
  zplane_nend = 100000
  ! Set number of iterations to skip between recordings
  zplane_nskip = 10
  ! Specify number of planes to record
  zplane_nloc = 3
  ! Specify location of planes
  zplane_loc = 0.1, 0.2, 0.3

  ! Turn on spectra calculations at specified z-planes
  spectra_calc = .false.
  ! Set when to start recording
  spectra_nstart = 1
  ! Set when to stop recording
  spectra_nend = 100000
  ! Specify number of planes to record
  spectra_nloc = 3
  ! Specify location of planes
  spectra_loc = 0.1, 0.2, 0.3
  
}

